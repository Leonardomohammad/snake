<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="css/style.css">
    <!-- <link rel="import" href="component.html"> -->
    <!-- <link rel="alternate" href="rss.xml" type="application/rss+xml" title="RSS">
     -->

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>snake</title>

    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  
<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>


<!-- <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script> -->
</head>

<body>
    <h1 style="text-align:center;">This is a Game</h1>
    <div id="exit"></div>
    <div id="root"></div>
    <audio id="hello" src="/sounds/cinematic-intro-6097.mp3"></audio>;
  <script type='text/babel' >
    
class App extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      stop:false,
      number:2,
      leaderId:29,
      preX:[39],
      fun:'moving',
      a: 1,
      apple:false,
      upN1:90,
      upN2:91,
      speed:500,
    array:[
  { id: 0, color: 'pink', status: false },
  { id: 1, color: 'black', status: false },
  { id: 2, color: 'black', status: false },
  { id: 3, color: 'black', status: false },
  { id: 4, color: 'black', status: false },
  { id: 5, color: 'black', status: false },
  { id: 6, color: 'black', status: false },
  { id: 7, color: 'black', status: false },
  { id: 8, color: 'black', status: false },
  { id: 9, color: 'black', status: false },
  { id: 10, color: 'black', status: false },
  { id: 11, color: 'black', status: false },
  { id: 12, color: 'black', status: false },
  { id: 13, color: 'black', status: false },
  { id: 14, color: 'black', status: false },
  { id: 15, color: 'red', status: 1 },
  { id: 16, color: 'red', status: 'leader' },
  { id: 17, color: 'black', status: false },
  { id: 18, color: 'black', status: false },
  { id: 19, color: 'black', status: false },
  { id: 20, color: 'black', status: false },
  { id: 21, color: 'black', status: false },
  { id: 22, color: 'black', status: false },
  { id: 23, color: 'black', status: false },
  { id: 24, color: 'black', status: false },
  { id: 25, color: 'black', status: false },
  { id: 26, color: 'black', status: false },
  { id: 27, color: 'black', status: false },
  { id: 28, color: 'black', status: false },
  { id: 29, color: 'black', status: false },
  { id: 30, color: 'black', status: false },
  { id: 31, color: 'black', status: false },
  { id: 32, color: 'black', status: false },
  { id: 33, color: 'black', status: false },
  { id: 34, color: 'black', status: false },
  { id: 35, color: 'black', status: false },
  { id: 36, color: 'black', status: false },
  { id: 37, color: 'black', status: false },
  { id: 38, color: 'black', status: false },
  { id: 39, color: 'black', status: false },
  { id: 40, color: 'black', status: false },
  { id: 41, color: 'black', status: false },
  { id: 42, color: 'black', status: false },
  { id: 43, color: 'black', status: false },
  { id: 44, color: 'black', status: false },
  { id: 45, color: 'black', status: false },
  { id: 46, color: 'black', status: false },
  { id: 47, color: 'black', status: false },
  { id: 48, color: 'black', status: false },
  { id: 49, color: 'black', status: false },
  { id: 50, color: 'black', status: false },
  { id: 51, color: 'black', status: false },
  { id: 52, color: 'black', status: false },
  { id: 53, color: 'black', status: false },
  { id: 54, color: 'black', status: false },
  { id: 55, color: 'black', status: false },
  { id: 56, color: 'black', status: false },
  { id: 57, color: 'black', status: false },
  { id: 58, color: 'black', status: false },
  { id: 59, color: 'black', status: false },
  { id: 60, color: 'black', status: false },
  { id: 61, color: 'black', status: false },
  { id: 62, color: 'black', status: false },
  { id: 63, color: 'black', status: false },
  { id: 64, color: 'black', status: false },
  { id: 65, color: 'black', status: false },
  { id: 66, color: 'black', status: false },
  { id: 67, color: 'black', status: false },
  { id: 68, color: 'black', status: false },
  { id: 69, color: 'black', status: false },
  { id: 70, color: 'black', status: false },
  { id: 71, color: 'black', status: false },
  { id: 72, color: 'black', status: false },
  { id: 73, color: 'black', status: false },
  { id: 74, color: 'black', status: false },
  { id: 75, color: 'black', status: false },
  { id: 76, color: 'black', status: false },
  { id: 77, color: 'black', status: false },
  { id: 78, color: 'black', status: false },
  { id: 79, color: 'black', status: false },
  { id: 80, color: 'black', status: false },
  { id: 81, color: 'black', status: false },
  { id: 82, color: 'black', status: false },
  { id: 83, color: 'black', status: false },
  { id: 84, color: 'black', status: false },
  { id: 85, color: 'black', status: false },
  { id: 86, color: 'black', status: false },
  { id: 87, color: 'black', status: false },
  { id: 88, color: 'black', status: false },
  { id: 89, color: 'black', status: false },
  { id: 90, color: 'black', status: false },
  { id: 91, color: 'black', status: false },
  { id: 92, color: 'black', status: false },
  { id: 93, color: 'black', status: false },
  { id: 94, color: 'black', status: false },
  { id: 95, color: 'black', status: false },
  { id: 96, color: 'black', status: false },
  { id: 97, color: 'black', status: false },
  { id: 98, color: 'black', status: false },
  { id: 99, color: 'black', status: false }
]
    
    };
    // this.moving=this.moving.bind(this);
  }
 shouldComponentUpdate(nextProps, nextState){
  if(this.state.fun!=nextState.fun){
    return false;
  }
   if(this.state.leaderId!=nextState.leaderId){
    return false;
  }
  
  return true;
 }
 
  componentDidMount() {
    document.addEventListener("keydown", this.key);
  }
  componentWillUnmount() {
    document.removeEventListener("keydown",this.key);
  }
  key = (e) => {
    let x = e.keyCode;
 let ne=this.state.preX;
if(x==38&&this.state.preX[this.state.preX.length-1]!==38&&this.state.preX[this.state.preX.length-1]!==40){
  ne=[...ne,38];

this.setState({
  preX:ne,
  fun:'up',
})
}
else if(x==39&&this.state.preX[this.state.preX.length-1]!==39&&this.state.preX[this.state.preX.length-1]!==37){
  ne=[...ne,39];
this.setState({
  preX:ne,
  fun:'moving',
})
}
else if(x==40&&this.state.preX[this.state.preX.length-1]!==40&&this.state.preX[this.state.preX.length-1]!==38){
  ne=[...ne,40];
this.setState({
  preX:ne,
  fun:'down',
})
}
else if(x==37&&this.state.preX[this.state.preX.length-1]!==37&&this.state.preX[this.state.preX.length-1]!==39){
  ne=[...ne,37];
this.setState({
  preX:ne,
  fun:'left',
})
}
else if(x===27){
  if(this.state.stop===true){
    this.setState({
      stop:false,
    })
  }
  else{
    this.setState({
      stop:true,
    })
  }
}
};


// leading= (mm) =>{
//   let newM=[...mm];
//   // console.log(newM,'here is me i am the newMmmmmm',newM[10].color)
//   for(let i=1;i<this.state.number;i++){
//   for(let y=0;y<newM.length;y++){
// // console.log('we are looping here')
//   if(newM[y].status=='L'+i){
//     console.log('catch youu',this.state.leaderId,y);
//     newM[y].color='black';
//     newM[this.state.leaderId].color='red';
//     newM[y].status=false;
//     newM[this.state.leaderId].status='L'+i;
//     this.setState({
//       leaderId:y,
//     })
//   }
// }
//   }
// // console.log('here is the new mmmmmmmmmmmmmmmmm',newM)
// return newM;

// }
// adding=(mm)=>{
//  let m=[...mm];
//  if(this.state.fun=='moving'){
//   let x=0;
//   let newStateNumber=this.state.number;
// for(let i=0;i<m.length&&x==0;i++){
//   if(m[i].status==newStateNumber-1){
// if(i==0){
//   m[99].color='red';
//   m[99].status=newStateNumber;
// }
// else{
//   m[i-1].color='red';
//   m[i-1].status=newStateNumber;
// }
//   x=1;}
// }
// return m;}
//  else if(this.state.fun=='left'){
//   let x=0;
// for(let i=0;i<m.length&&x==0;i++){
//   if(m[i].status==this.state.number-1){
// if(i==99){
//   m[0].color='red';
//   m[0].status=this.state.number;
  
//   x=1;
// }
// else{
//   m[i+1].color='red';

//   m[i+1].status=this.state.number;
  
//   x=1;
// }}
// }
 
// return m; } 
//  else if(this.state.fun=='up'){
//   let x=0;
// for(let i=0;i<m.length&&x==0;i++){
//   if(m[i].status==this.state.number-1){
// if(i==99){
//   m[0].color='red';
//   m[0].status=this.state.number;
// }
// else if(i>89){
  
//   m[i-89].color='red';
//   m[i-89].status=this.state.number;
// }
// else{
//   m[i+10].color='red';
//   m[i+10].status=this.state.number;
//   }
  
//   x=1;
// }}
// return m;}
//  else if(this.state.fun=='down'){
//   let x=0;
// for(let i=0;i<m.length&&x==0;i++){
//   if(m[i].status==this.state.number-1){
// if(i==9){
//   m[90].color='red';
//   m[90].status=this.state.number;
// }
// else if(i<10){
//   m[i+91].color='red';
//   m[i+91].status=this.state.number;
// }
// else{
//   m[i-10].color='red';
//   m[i-10].status=this.state.number;
//   }
  
//   x=1;
// }}
// return m;
//  }
 
// }
fuk =(mm)=>{
  let m=[...mm];
  let x=0;
  for(let i=this.state.number-1;i>0;i--){
    x=0;
    for(let y=0;y<m.length&&x==0;y++){
    if(m[y].status==i){
m[y].status=i+1;
x=1;
    }
    }
  }
  for(let i=0;i<m.length;i++){
    if(m[i].status=='leader'){
      m[i].status=1;
    }
  }
  // console.log(m,'here is m in the fuk')
return m;

}
moving =()=>{
    let m=[...this.state.array];
    let innerId=this.state.leaderId;
    let newNumber=0;
    let x=0;
    let I=0;
    let colorness='black';
          for(let i=0;i<m.length&&x==0;i++){
            if(i==m[m.length-1].id&&m[i].status==='leader'){
             if(m[0].color=='pink'){
colorness='pink';
m=this.fuk(m);
m[1].color='red';
m[1].status='leader';
m[0].color='black';
m[0].status=false;
I=1;

innerId=0;
              x=1;
             }
             else{
                m[i].color='black';
              m[0].color='red';
              m[0].status='leader';
              m[i].status=false;

              innerId=i;
              x=1;
             }
            }
            else if(m[i].status==='leader'){
              if(m[i+1].color=='pink'){
                colorness='pink';
                m=this.fuk(m);
m[i+2].color='red';
m[i+2].status='leader';
m[i+1].color='black';
m[i+1].status=false;
I=1;

innerId=i+1;
              x=1;
              }
  
               else{
                m[i].color='black';
              m[i].status=false;
              m[i+1].color='red';
              m[i+1].status='leader';
              
              
              innerId=i;
              
              x=1;
               }
              
            }}
    let final=0;
    for(let i=1;i<this.state.number+I;i++){
      final=0;
  for(let y=0;y<m.length&&final==0;y++){
// console.log('we are looping here')
  if(m[y].status==i){
    // console.log('catch youu',this.state.leaderId,y,i);
    m[y].color='black';
    m[innerId].color='red';
    m[y].status=false;
    m[innerId].status=i;
    if(i<this.state.number+I-1){
innerId=y;
    }
    else if(i==this.state.number+I-1&&innerId!=y ){
    this.setState({
      leaderId:y,
      })
    }
final=1;
  }
}
  }
if(colorness=='pink'){
  newNumber=this.state.number+1;
  
  m=this.eating(m);   
}
      setTimeout(()=>{
          let ne=0;
          let theNewNumber=0;
          if(this.state.preX.length>1){
            
         console.log(this.state.preX,'this.state.preX.shift()');
         ne=this.state.preX;
         ne.shift();
         console.log(ne,'this.state.preX.shift()');
        }
        else{ ne=this.state.preX;
        }
if(newNumber>0){
theNewNumber=newNumber;
}
else{
  theNewNumber=this.state.number;
}
            this.setState((state,props)=>{
              return({
                preX:[...ne],
                array:m,
                number:theNewNumber,

            })
          })
          }
          ,this.state.speed);
       
    
  };
up=()=>{
  // console.log('in the up');
  let m=[...this.state.array];
   let colorness='black';
   let newNumber=0;
  let innerId=this.state.leaderId;
    let x=0;
          for(let i=0;i<m.length&&x==0;i++){
           if(i==9&&m[i].status==='leader'){
            if(m[this.state.upN1].color=='pink'){
              colorness='pink';
            }
m[i].color='black';
m[this.state.upN1].color='red';
m[i].status=false;
m[this.state.upN1].status='leader';
innerId=i;
x=1;
           }
           
           else if(i<10&&m[i].status==='leader'){
            if(m[i+this.state.upN2].color=='pink'){
              colorness='pink';
            }
              m[i].color='black';
              m[i+this.state.upN2].color='red';
              m[i].status=false;
m[i+this.state.upN2].status='leader';

innerId=i;
              x=1;
            }
            else if(m[i].status==='leader'){
              if(m[i-10].color=='pink'){
                colorness='pink';
            }
               m[i].color='black';
             
              m[i-10].color='red';
              m[i].status=false;
m[i-10].status='leader';

innerId=i;
              x=1;
            }}
      let final=0;
    for(let i=1;i<this.state.number;i++){
      final=0;
  for(let y=0;y<m.length&&final==0;y++){
// console.log('we are looping here')
  if(m[y].status==i){
    console.log('catch youu',this.state.leaderId,y,i);
    m[y].color='black';
    m[innerId].color='red';
    m[y].status=false;
    m[innerId].status=i;
    if(i<this.state.number-1){
innerId=y;
    }
    else if(i==this.state.number-1&&innerId!=y ){
    this.setState({
      leaderId:y,
      })
    }
final=1;
  }
}
  }
if(colorness=='pink'){
  newNumber=this.state.number+1;
  m=this.fuk(m);
  
  for(let i=0;i<m.length;i++){
    if(m[i].status==1){
      if(i==9){
        m[90].color='red';
        m[90].status='leader';

      }
      else if(i<9){
        
        m[i+this.state.upN2].color='red';
        m[i+this.state.upN2].status='leader';
      }
      else{
        m[i-10].color='red';
        m[i-10].status='leader';
      }
    }
  }

  m=this.eating(m);}
        
            setTimeout(()=>{
        let ne=0;
        let theNewNumber=0;
          if(this.state.preX.length>1){
         ne=this.state.preX;
        ne.shift();}
        else{
          ne=this.state.preX;
        }
        
        if(newNumber>0){
theNewNumber=newNumber;
}
else{
  theNewNumber=this.state.number;
}
            this.setState((state,props)=>{
              return({
                preX:ne,
                array:m,
                number:theNewNumber,
            })
          })
          }
          ,this.state.speed);
    
    
  }
 down=()=>{
  let m=[...this.state.array];
let innerId=this.state.leaderId;
let colorness='black';
let newNumber=0;
    let x=0;
          for(let i=0;i<m.length&&x==0;i++){
           if(i==99&&m[i].status==='leader'){
            if(m[0].color=='pink'){
              colorness='pink';
            }
m[i].color='black';
m[0].color='red';
m[i].status=false;
m[0].status='leader';
innerId=i;
x=1;
           }
           
           else if(i>89&&m[i].status==='leader'){
            
            if(m[i-89].color=='pink'){
              colorness='pink';
            }
              m[i].color='black';
              m[i-89].color='red';
              
m[i].status=false;
m[i-89].status='leader';
innerId=i;
              x=1;
            }
            else if(m[i].status=='leader'){
              
            if(m[i+10].color=='pink'){
              colorness='pink';
            }
               m[i].color='black';
             
              m[i+10].color='red';
              
m[i].status=false;
m[i+10].status='leader';
innerId=i;
              x=1;

            }}

      let final=0;
    for(let i=1;i<this.state.number;i++){
      final=0;
  for(let y=0;y<m.length&&final==0;y++){
  if(m[y].status==i){
    console.log('catch youu',this.state.leaderId,y,i);
    m[y].color='black';
    m[innerId].color='red';
    m[y].status=false;
    m[innerId].status=i;
    if(i<this.state.number-1){
innerId=y;
    }
    else if(i==this.state.number-1&&innerId!=y ){
    this.setState({
      leaderId:y,
      })
    }
final=1;
  }
}
  }
  if(colorness=='pink'){
  newNumber=this.state.number+1;
   m=this.fuk(m);
  
  for(let i=0;i<m.length;i++){
    if(m[i].status==1){
      if(i==99){
        m[0].color='red';
        m[0].status='leader';

      }
      else if(i>89){
        
        m[i-89].color='red';
        m[i-89].status='leader';
      }
      else{
        m[i+10].color='red';
        m[i+10].status='leader';
      }
    }
  }

  m=this.eating(m);
}
     
       setTimeout(()=>{
          let ne=0;
          let theNewNumber=0;
          if(this.state.preX.length>1){
         ne=this.state.preX;
        ne.shift();}
        else{
          ne=this.state.preX;
        }
        if(newNumber>0){
theNewNumber=newNumber;
}
else{
  theNewNumber=this.state.number;
}
            this.setState((state,props)=>{
              return({
                array:m,
                preX:ne,
                number:theNewNumber,
            })
          })
          }
          ,this.state.speed);
    
    
  
 }
 left=()=>{
    let m=[...this.state.array];
    let innerId=this.state.leaderId;
  // console.log('in the left');
  let colorness='black';
  let newNumber=0;
    let x=0;
          for(let i=0;i<m.length&&x==0;i++){
           if(i==0&&m[i].status==='leader'){
            if(m[m[m.length-1].id].color=='pink'){
              colorness='pink';
              }
m[i].color='black';
m[m[m.length-1].id].color='red';

m[m[m.length-1].id].status='leader';
              m[i].status=false;
              innerId=i;
x=1;
           }
           
            else if(m[i].status==='leader'){
              if(m[i-1].color=='pink'){
                colorness='pink'
              }
               m[i].color='black';
              m[i-1].color='red';
              
              m[i-1].status='leader';
              m[i].status=false;
              
innerId=i;
              x=1;
            }}
            let final=0;
    for(let i=1;i<this.state.number;i++){
      final=0;
  for(let y=0;y<m.length&&final==0;y++){
  if(m[y].status==i){
    console.log('catch youu',this.state.leaderId,y,i);
    m[y].color='black';
    m[innerId].color='red';
    m[y].status=false;
    m[innerId].status=i;
    if(i<this.state.number-1){
innerId=y;
    }
    else if(i==this.state.number-1&&innerId!=y ){
    this.setState({
      leaderId:y,
      })
    }
final=1;
  }
}
  }
// console.log(m,'here is the end mmmmmm');
if(colorness=='pink'){
  newNumber=this.state.number+1;
  m=this.fuk(m);
  // console.log(m,'here is m in the left method');
  
  for(let i=0;i<m.length;i++){
    if(m[i].status==1){
      if(i==0){
        m[99].color='red';
        m[99].status='leader';

      }
      else{
        m[i-1].color='red';
        m[i-1].status='leader';
      }
    }
  }
//  console.log(m,'here is m after for loop')
  m=this.eating(m);
}
          
        setTimeout(()=>{
          let ne=0;
          let theNewNumber=0;
          if(this.state.preX.length>1){
         ne=this.state.preX;
        ne.shift();}
        else{
          ne=this.state.preX;
        }

        if(newNumber>0){
theNewNumber=newNumber;
}
else{
  theNewNumber=this.state.number;
}
            this.setState((state,props)=>{
              return({
                array:m,
                preX:ne,
                number:theNewNumber,
            })
          })
          }
          ,this.state.speed);
    
    
  }
  stopp=()=>{
let m=[...this.state.array];

  }
  eating=(mm)=>{
    let m=[...mm];
    let x=Math.round(Math.random()*30);
    
    while(m[x].color=='red'){
      x=Math.round(Math.random()*30);
    }
    m[x].color='pink';
  return m;
}
  
  render() {
  if(this.state.stop===true){
this.stopp();
  }
  else{
   if(this.state.preX[0]==39){
   this.moving();
    }
    
  else  if(this.state.preX[0]==38){
this.up();
}
  else if(this.state.preX[0]==40){
    this.down();
  }
  else if(this.state.preX[0]==37){
    this.left();
  }
  }
return(
      <div className="main">
        {this.state.array.map((a) => {
          return <Mm style={{ backgroundColor: a.color }} id={a.id} />;
        })}
      </div>
    );
  }

}

class Mm extends React.Component {
  constructor(props) {
    super(props);
  }
  render() {
    return (
      <div className="unit" style={this.props.style} id={this.props.id}></div>
    );
  }
}
ReactDOM.render(<App />, document.getElementById("root"));
      let a='/sounds/cinematic-intro-6097.mp3'
      let b='https://s3.amazonaws.com/freecodecamp/drums/Dsc_Oh.mp3'

        </script>
</body>
</html>